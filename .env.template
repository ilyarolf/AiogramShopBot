# ============================================================================
# AiogramShopBot Configuration Template
# ============================================================================
#
# HOW TO USE:
# 1. Copy this file: cp .env.template .env
# 2. Fill in all values (replace empty strings and placeholders)
# 3. Never commit .env to git (it's in .gitignore)
#
# ============================================================================

# ----------------------------------------------------------------------------
# TELEGRAM BOT CONFIGURATION
# ----------------------------------------------------------------------------

# Bot API token from @BotFather
# Example: 1234567890:ABCdefGHIjklMNOpqrsTUVwxyz1234567890
TOKEN=

# Comma-separated list of Telegram user IDs with admin privileges
# Find your ID via @userinfobot
# Example: 123456789,987654321
ADMIN_ID_LIST=

# Support contact link shown to users (Telegram username or group)
# Example: https://t.me/your_username
SUPPORT_LINK=

# ----------------------------------------------------------------------------
# WEBHOOK CONFIGURATION
# ----------------------------------------------------------------------------

# Webhook path for Telegram updates (usually "/")
WEBHOOK_PATH=/

# Host address for the web application
# Production: Use your domain or server IP
# Development: Use "localhost" or "0.0.0.0"
WEBAPP_HOST=localhost

# Port for the web application
# Must be available and not blocked by firewall
WEBAPP_PORT=5001

# Secret token for webhook authentication (generate random string)
# Used to verify requests are from Telegram
# Example: dev-webhook-secret-12345
WEBHOOK_SECRET_TOKEN=

# ----------------------------------------------------------------------------
# RUNTIME ENVIRONMENT
# ----------------------------------------------------------------------------

# Runtime environment mode
# Options: DEV (development with ngrok) | PROD (production)
# DEV: Uses ngrok tunnel for local development
# PROD: Uses external IP from sslipio
RUNTIME_ENVIRONMENT=DEV

# Ngrok authentication token (only needed for DEV mode)
# Get from https://dashboard.ngrok.com/get-started/your-authtoken
# Leave empty if RUNTIME_ENVIRONMENT=PROD
NGROK_TOKEN=

# ----------------------------------------------------------------------------
# DATABASE CONFIGURATION
# ----------------------------------------------------------------------------

# SQLite database filename
# Example: database.db
DB_NAME=database.db

# Database encryption (experimental feature)
# Options: true | false
# Note: May impact performance
DB_ENCRYPTION=false

# Database password (used if DB_ENCRYPTION=true)
# Example: your-secure-password-123
DB_PASS=

# ----------------------------------------------------------------------------
# REDIS CONFIGURATION
# ----------------------------------------------------------------------------

# Redis server hostname
# Local: localhost
# Docker: redis (service name)
# Production: Your Redis server address
REDIS_HOST=localhost

# Redis authentication password
# Leave empty if Redis has no password
# Example: your-redis-password-123
REDIS_PASSWORD=

# ----------------------------------------------------------------------------
# BOT BEHAVIOR CONFIGURATION
# ----------------------------------------------------------------------------

# Number of items per page in paginated lists
# Recommended: 5-10 for optimal UX
PAGE_ENTRIES=8

# Bot language for localization
# Options: en (English) | de (German)
BOT_LANGUAGE=en

# Multi-bot mode (allows multiple bot instances)
# Options: true | false
# Set to false for single-bot deployments
MULTIBOT=false

# Fiat currency for prices
# Options: USD | EUR | GBP
CURRENCY=USD

# ----------------------------------------------------------------------------
# PAYMENT SYSTEM (KryptoExpress)
# ----------------------------------------------------------------------------

# KryptoExpress API Key
# Get from your KryptoExpress dashboard
KRYPTO_EXPRESS_API_KEY=

# KryptoExpress API URL
# Production: https://kryptoexpress.pro/api
# Staging: Check KryptoExpress docs
KRYPTO_EXPRESS_API_URL=https://kryptoexpress.pro/api

# KryptoExpress API Secret for webhook verification (HMAC-SHA512)
# IMPORTANT: This is NOT provided by KryptoExpress - YOU generate it yourself!
#
# How to generate:
#   openssl rand -hex 32
#   OR use any random string generator (min 20 characters recommended)
#
# How it works:
#   1. You generate a secret string (e.g., "my-super-secret-key-12345")
#   2. Bot sends this secret to KryptoExpress when creating payments
#   3. KryptoExpress uses YOUR secret to sign webhook callbacks (HMAC-SHA512)
#   4. Bot verifies webhook signatures using the same secret
#   5. This ensures webhooks are actually from KryptoExpress, not attackers
#
# Security: Keep this secret! Anyone with this can forge webhook requests
# Optional: Leave empty to disable signature verification (NOT recommended for production)
#
# Example: abc123def456789012345678901234567890abcdef1234567890abcdef123456
KRYPTO_EXPRESS_API_SECRET=

# ----------------------------------------------------------------------------
# ORDER & INVOICE SYSTEM
# ----------------------------------------------------------------------------

# Order timeout in minutes (how long payment window stays open)
# After timeout: Order cancelled automatically, stock released
# Recommended: 15-30 minutes
# Example: 30
ORDER_TIMEOUT_MINUTES=30

# Grace period for free order cancellation (minutes)
# Within this period: User can cancel without penalty
# After period: Cancellation results in strike
# Recommended: 3-5 minutes
# Example: 5
ORDER_CANCEL_GRACE_PERIOD_MINUTES=5

# Payment status check interval in seconds
# How often the payment timeout job checks for expired orders
# Recommended: 30-60 seconds
# Example: 60
PAYMENT_CHECK_INTERVAL_SECONDS=60

# ----------------------------------------------------------------------------
# PAYMENT VALIDATION SYSTEM
# ----------------------------------------------------------------------------

# Overpayment tolerance percentage
# Payments within this percentage above required are accepted as "exact"
# Excess amount â‰¤ tolerance: Forfeits to shop
# Excess amount > tolerance: Credited to wallet
# Example: 0.1 means 0.1% tolerance
PAYMENT_TOLERANCE_OVERPAYMENT_PERCENT=0.1

# Enable underpayment retry (allow one-time retry with 30 min extension)
# Options: true | false
PAYMENT_UNDERPAYMENT_RETRY_ENABLED=true

# Timeout extension in minutes for underpayment retry (after 1st underpayment)
# Recommended: 30 minutes
PAYMENT_UNDERPAYMENT_RETRY_TIMEOUT_MINUTES=30

# Penalty percentage for second underpayment
# Applied when user fails to pay correct amount twice
# Example: 5 means 5% penalty
PAYMENT_UNDERPAYMENT_PENALTY_PERCENT=5

# Penalty percentage for late payment (after deadline)
# Applied when payment arrives after order expired
# Example: 5 means 5% penalty
PAYMENT_LATE_PENALTY_PERCENT=5

# ----------------------------------------------------------------------------
# DATA RETENTION & PRIVACY
# ----------------------------------------------------------------------------

# Data retention period in days for orders, invoices, and payment transactions
# After this period: All order-related data is permanently deleted
# Recommended: 30 days (GDPR compliance)
DATA_RETENTION_DAYS=30

# Referral data retention in days (longer than orders for abuse detection)
# Referral usage records kept for pattern analysis
# Recommended: 365 days
REFERRAL_DATA_RETENTION_DAYS=365

# ----------------------------------------------------------------------------
# SHIPPING MANAGEMENT (for physical items)
# ----------------------------------------------------------------------------

# Encryption secret for shipping addresses (AES-256-GCM)
# REQUIRED if you have physical items with shipping
# Used to encrypt customer shipping addresses in database (GDPR compliance)
#
# Generate with:
#   openssl rand -hex 32
#
# Important:
#   - Must be exactly 64 hex characters (32 bytes)
#   - Keep this secret safe - losing it means losing access to all addresses
#   - Never change after addresses are stored (old addresses become unreadable)
#   - Back up this value along with your database
#
# Example: 1a2b3c4d5e6f7a8b9c0d1e2f3a4b5c6d7e8f9a0b1c2d3e4f5a6b7c8d9e0f1a2b3
ENCRYPTION_SECRET=

